# Server Configuration
NODE_ENV=development
PORT=3004
SERVICE_NAME=pricing-service

# Database
DATABASE_URL="postgresql://neondb_owner:npg_kp4AVvbJxf9i@ep-steep-rain-a49rnsg4-pooler.us-east-1.aws.neon.tech/neondb?sslmode=require&channel_binding=require&schema=public"

# Database (Local Development - Optional)
# DATABASE_URL="postgresql://user:password@localhost:5432/airline_ops?schema=public"

# Redis (Fare & Price Caching)
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=3
REDIS_KEY_PREFIX=price:

# Cache Configuration
CACHE_ENABLED=true
FARE_CACHE_TTL=3600
PRICE_CACHE_TTL=300
TAX_RULE_CACHE_TTL=86400
FX_RATE_CACHE_TTL=3600

# Performance Targets
PRICE_CALCULATION_TIMEOUT=200
MAX_CONCURRENT_CALCULATIONS=200

# Fare Management
DEFAULT_CURRENCY=USD
SUPPORTED_CURRENCIES=USD,EUR,GBP,CAD,AUD,JPY,CNY,INR
FARE_BASIS_CODE_LENGTH=8
MAX_FARE_VALIDITY_DAYS=365

# Dynamic Pricing
ENABLE_DYNAMIC_PRICING=true
BASE_DEMAND_FACTOR=1.0
HIGH_DEMAND_THRESHOLD=0.8
TIME_TO_DEPARTURE_BUCKETS=90,60,30,14,7,3,1
DYNAMIC_PRICING_MIN_MULTIPLIER=0.7
DYNAMIC_PRICING_MAX_MULTIPLIER=3.0

# Tax Configuration
ENABLE_TAX_CALCULATION=true
DEFAULT_TAX_COUNTRY=US
TAX_ROUNDING_PRECISION=2

# US Tax Rates
US_EXCISE_TAX_RATE=0.075
US_SEGMENT_TAX=4.50
US_SEPTEMBER_11_FEE=5.60
US_APHIS_FEE=3.96

# EU Tax Configuration
EU_VAT_RATE=0.20
EU_PASSENGER_SERVICE_CHARGE=10.00

# Fuel Surcharge
ENABLE_FUEL_SURCHARGE=true
FUEL_SURCHARGE_DOMESTIC=25.00
FUEL_SURCHARGE_INTERNATIONAL=50.00

# Foreign Exchange
FX_API_URL=https://api.exchangerate-api.com/v4/latest
FX_API_KEY=
FX_UPDATE_INTERVAL=3600000
FX_FALLBACK_ENABLED=true

# Fare Families
FARE_FAMILY_BASIC_MULTIPLIER=1.0
FARE_FAMILY_STANDARD_MULTIPLIER=1.3
FARE_FAMILY_FLEX_MULTIPLIER=1.6
FARE_FAMILY_PREMIUM_MULTIPLIER=2.5

# Passenger Type Discounts
CHILD_DISCOUNT_PERCENTAGE=25
INFANT_DISCOUNT_PERCENTAGE=90
SENIOR_DISCOUNT_PERCENTAGE=10
MILITARY_DISCOUNT_PERCENTAGE=15
STUDENT_DISCOUNT_PERCENTAGE=10

# Channel Pricing
DIRECT_BOOKING_DISCOUNT=0.00
GDS_BOOKING_MARKUP=5.00
OTA_BOOKING_MARKUP=8.00
AGENT_BOOKING_MARKUP=3.00

# Commission Rates
TRAVEL_AGENCY_COMMISSION_RATE=0.10
GDS_OVERRIDE_COMMISSION=25.00
AFFILIATE_COMMISSION_RATE=0.05

# Price Guarantee
PRICE_LOCK_ENABLED=true
PRICE_LOCK_DURATION=1800
PRICE_LOCK_FEE=0.00

# Promotional Pricing
PROMO_CODE_MAX_DISCOUNT_PERCENTAGE=50
PROMO_CODE_MAX_DISCOUNT_AMOUNT=500.00

# Corporate Discounts
CORPORATE_DISCOUNT_MIN_PERCENTAGE=5
CORPORATE_DISCOUNT_MAX_PERCENTAGE=30

# Bundling
ENABLE_BUNDLE_PRICING=true
BUNDLE_DISCOUNT_PERCENTAGE=15
UPSELL_THRESHOLD_PERCENTAGE=10

# Business Rules
MIN_ADVANCE_PURCHASE_DAYS=0
MAX_ADVANCE_PURCHASE_DAYS=365
MIN_STAY_DAYS=0
MAX_STAY_DAYS=365
SATURDAY_NIGHT_STAY_REQUIRED=false

# Rate Limiting
RATE_LIMIT_WINDOW_MS=60000
RATE_LIMIT_MAX_REQUESTS=100

# CORS
CORS_ORIGIN=http://localhost:3000,http://localhost:3001

# Logging
LOG_LEVEL=info
LOG_DIR=logs

# Monitoring
ENABLE_METRICS=true
METRICS_PORT=9004

# Feature Flags
ENABLE_COMPETITOR_MONITORING=false
ENABLE_PRICE_OPTIMIZATION=true
ENABLE_SPLIT_PAYMENT=true
ENABLE_MULTI_CURRENCY=true
